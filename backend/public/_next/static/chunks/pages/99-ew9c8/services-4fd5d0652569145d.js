(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[717],{55859:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/99-ew9c8/services",function(){return s(36291)}])},39070:function(e,t,s){"use strict";s.d(t,{Z:function(){return x}});var i=s(85893);s(67294);var n=s(98396),a=s(12937);let l=()=>[{title:"الأقسام",path:"/99-ew9c8/categories",icon:"material-symbols:category"},{title:"الأخبار",path:"/99-ew9c8/posts",icon:"bx:news"},{title:"خدمات",path:"/99-ew9c8/services",icon:"eos-icons:service"},{title:"ادارة القائمة الرئيسية",path:"/99-ew9c8/header-navigations",icon:"subway:menu"},{title:"ادارة  القائمة بالاسفل",path:"/99-ew9c8/footer-navigations",icon:"subway:menu"},{title:"مركز الاتصالات",path:"/99-ew9c8/contacts",icon:"bx:chat"},{title:"الاعدادات",path:"/99-ew9c8/setting",icon:"tabler:settings"}];var r=s(23664),o=s(29375),c=s(21958),d=s(28756);let u=e=>{let{children:t,contentHeightFixed:s}=e,{settings:u,saveSettings:x}=(0,d.r)(),h=(0,n.Z)(e=>e.breakpoints.down("lg"));return h&&"horizontal"===u.layout&&(u.layout="vertical"),(0,i.jsx)(a.Z,{hidden:h,settings:u,saveSettings:x,contentHeightFixed:s,verticalLayoutProps:{navMenu:{navItems:l()},appBar:{content:e=>(0,i.jsx)(o.Z,{hidden:h,settings:u,saveSettings:x,toggleNavVisibility:e.toggleNavVisibility})}},..."horizontal"===u.layout&&{horizontalLayoutProps:{navMenu:{navItems:(0,r.Z)()},appBar:{content:()=>(0,i.jsx)(c.Z,{settings:u,saveSettings:x})}}},children:t})};var x=u},36291:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return M}});var i=s(85893),n=s(67294),a=s(87357),l=s(34386),r=s(83321),o=s(66242),c=s(78445),d=s(15861),u=s(61903),x=s(93946),h=s(67720),m=s(62303),p=s(79878),Z=s(39070),j=s(50657),g=s(37645),v=s(6514),f=s(94054),b=s(31425),w=s(98456),S=s(9134),C=s(51566);let y=e=>{let{open:t,onSuccess:s,onClose:a}=e,[l,o]=(0,n.useState)(!1),[c,h]=(0,n.useState)(""),[m,Z]=(0,n.useState)("");(0,n.useEffect)(()=>{t&&(h(""),Z(""))},[t]);let y=async()=>{if(""===c.trim())S.Am.error("يرجى ادخال العنوان");else try{o(!0);let{data:e}=await C.Z.post("/admin/services",{title:c,description:m});e.status?(S.Am.success(e.msg),s(),a()):S.Am.error(e.msg)}catch(e){S.Am.error(e.message)}finally{setTimeout(()=>o(!1),500)}};return(0,i.jsxs)(j.Z,{fullWidth:!0,maxWidth:"xs",open:t,onClose:a,sx:{"& .MuiDialog-paper":{overflow:"visible"}},children:[(0,i.jsxs)(g.Z,{sx:{p:4},children:[(0,i.jsx)(d.Z,{variant:"h5",component:"span",children:"خدمة جديدة"}),(0,i.jsx)(x.Z,{sx:{position:"absolute",top:9,right:9},onClick:a,children:(0,i.jsx)(p.Z,{icon:"tabler:x",fontSize:"1.25rem"})})]}),(0,i.jsxs)(v.Z,{dividers:!0,children:[(0,i.jsx)(f.Z,{fullWidth:!0,sx:{mb:5},children:(0,i.jsx)(u.Z,{label:"العنوان",size:"small",value:c,onChange:e=>h(e.target.value)})}),(0,i.jsx)(f.Z,{fullWidth:!0,children:(0,i.jsx)(u.Z,{type:"textarea",size:"small",multiline:!0,minRows:5,label:"الوصف",value:m,onChange:e=>Z(e.target.value)})})]}),(0,i.jsxs)(b.Z,{sx:{p:"1rem !important"},children:[(0,i.jsx)(r.Z,{variant:"contained",color:"primary",disabled:l,startIcon:l&&(0,i.jsx)(w.Z,{color:"inherit",size:16}),onClick:y,children:"إنشاء"}),(0,i.jsx)(r.Z,{variant:"contained",color:"error",onClick:a,children:"إلغاء"})]})]})},z=e=>{let{open:t,service:s,onSuccess:a,onClose:l}=e,[o,c]=(0,n.useState)(!1),[h,m]=(0,n.useState)(""),[Z,y]=(0,n.useState)("");(0,n.useEffect)(()=>{t&&(m(s.title),y(s.description))},[t]);let z=async()=>{if(""===h.trim())S.Am.error("يرجى ادخال العنوان");else try{c(!0);let e=s._id,{data:t}=await C.Z.put("/admin/services/".concat(e),{title:h,description:Z});t.status?(S.Am.success(t.msg),a(),l()):S.Am.error(t.msg)}catch(e){S.Am.error(e.message)}finally{setTimeout(()=>c(!1),500)}};return(0,i.jsxs)(j.Z,{fullWidth:!0,maxWidth:"xs",open:t,onClose:l,sx:{"& .MuiDialog-paper":{overflow:"visible"}},children:[(0,i.jsxs)(g.Z,{sx:{p:4},children:[(0,i.jsx)(d.Z,{variant:"h5",component:"span",children:"تعديل الخدمة"}),(0,i.jsx)(x.Z,{sx:{position:"absolute",top:9,right:9},onClick:l,children:(0,i.jsx)(p.Z,{icon:"tabler:x",fontSize:"1.25rem"})})]}),(0,i.jsxs)(v.Z,{dividers:!0,children:[(0,i.jsx)(f.Z,{fullWidth:!0,sx:{mb:5},children:(0,i.jsx)(u.Z,{label:"العنوان",size:"small",value:h,onChange:e=>m(e.target.value)})}),(0,i.jsx)(f.Z,{fullWidth:!0,children:(0,i.jsx)(u.Z,{type:"textarea",size:"small",multiline:!0,minRows:5,label:"الوصف",value:Z,onChange:e=>y(e.target.value)})})]}),(0,i.jsxs)(b.Z,{sx:{p:"1rem !important"},children:[(0,i.jsx)(r.Z,{variant:"contained",color:"primary",disabled:o,startIcon:o&&(0,i.jsx)(w.Z,{color:"inherit",size:16}),onClick:z,children:"تحديث"}),(0,i.jsx)(r.Z,{variant:"contained",color:"error",onClick:l,children:"إلغاء"})]})]})};var k=s(58951);let _=e=>{let{open:t,service:s,onSuccess:a,onClose:l}=e,[o,c]=(0,n.useState)(!1),u=async()=>{try{let e=s._id,{data:t}=await C.Z.delete("/admin/services/".concat(e));t.status?(S.Am.success(t.msg),a(),l()):S.Am.error(t.msg)}catch(e){S.Am.error(e.message)}finally{setTimeout(()=>c(!1),500)}};return(0,i.jsxs)(j.Z,{open:t,onClose:l,children:[(0,i.jsx)(g.Z,{children:(0,i.jsx)(d.Z,{variant:"h5",children:"هل متأكد من حذف هذه الخدمة؟"})}),(0,i.jsx)(v.Z,{children:(0,i.jsx)(k.Z,{children:"بمجرد حذف هذه الخدمة، لن تتمكن من استعادتها مرة أخرى."})}),(0,i.jsxs)(b.Z,{className:"dialog-actions-dense",children:[(0,i.jsx)(r.Z,{variant:"contained",disabled:o,startIcon:o&&(0,i.jsx)(w.Z,{color:"inherit",size:16}),onClick:u,children:"حذف"}),(0,i.jsx)(r.Z,{variant:"contained",color:"error",onClick:l,children:"إلغاء"})]})]})},A=()=>{let[e,t]=(0,n.useState)(""),[s,Z]=(0,n.useState)([]),[j,g]=(0,n.useState)({}),[v,f]=(0,n.useState)({page:0,pageSize:10}),[b,w]=(0,n.useState)(!1),[S,k]=(0,n.useState)(!1),[A,M]=(0,n.useState)(!1),[N,W]=(0,n.useState)(!1);(0,n.useEffect)(()=>{E()},[b,e]);let E=async()=>{let{data:t}=await C.Z.get("/admin/services",{params:{search:e}});Z(t)},I=(e,t)=>{e.stopPropagation(),g(t),M(!0)},P=(e,t)=>{e.stopPropagation(),g(t),W(!0)};return(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(c.Z,{title:(0,i.jsx)(d.Z,{variant:"h4",children:"إدارة الخدمات"}),action:(0,i.jsxs)(a.Z,{sx:{display:"flex",gap:3},children:[(0,i.jsx)(u.Z,{size:"small",placeholder:"البحث",value:e,onChange:e=>t(e.target.value),InputProps:{startAdornment:(0,i.jsx)(a.Z,{sx:{mr:2,display:"flex"},children:(0,i.jsx)(p.Z,{fontSize:"1.25rem",icon:"tabler:search"})}),endAdornment:(0,i.jsx)(x.Z,{size:"small",title:"واضح","aria-label":"واضح",onClick:()=>t(""),children:(0,i.jsx)(p.Z,{fontSize:"1.25rem",icon:"tabler:x"})})}}),(0,i.jsx)(r.Z,{variant:"contained",startIcon:(0,i.jsx)(p.Z,{icon:"mdi:plus"}),onClick:()=>k(!0),children:"خدمة جديدة"})]})}),(0,i.jsx)(h.Z,{}),(0,i.jsx)(m._,{autoHeight:!0,rowHeight:80,getRowId:e=>e._id,columns:[{flex:1,field:"title",headerName:"العنوان",renderCell:e=>{let{row:t}=e;return t.title}},{flex:1,field:"items",headerName:"أغراض",renderCell:e=>{let{row:t}=e;return(0,i.jsx)("ul",{children:t.description.split(/\r*\n/).map((e,t)=>(0,i.jsx)("li",{children:e},t))})}},{flex:1,maxWidth:110,field:"action",headerName:"الإجراء",renderCell:e=>{let{row:t}=e;return(0,i.jsxs)(a.Z,{sx:{display:"flex",gap:3},children:[(0,i.jsx)(l.Z,{title:"يحرر",children:(0,i.jsx)(r.Z,{variant:"contained",size:"small",sx:{minWidth:35,px:0},onClick:e=>I(e,t),children:(0,i.jsx)(p.Z,{icon:"tabler:edit"})})}),(0,i.jsx)(l.Z,{title:"يمسح",children:(0,i.jsx)(r.Z,{variant:"contained",color:"error",size:"small",sx:{minWidth:35,px:0},onClick:e=>P(e,t),children:(0,i.jsx)(p.Z,{icon:"tabler:trash"})})})]})}}],rows:s,localeText:{noRowsLabel:"لا توجد صفوف",footerTotalRows:"إجمالي الصفوف:",columnMenuFilter:"منقي",columnMenuHideColumn:"إخفاء العمود",columnMenuManageColumns:"إدارة الأعمدة",columnMenuSortAsc:"الترتيب حسب تصاعدي",columnMenuSortDesc:"الترتيب تنازلياً",footerRowSelected:e=>"".concat(e.toLocaleString()," الصفوف المحددة"),footerTotalVisibleRows:(e,t)=>"".concat(e.toLocaleString()," من ").concat(t.toLocaleString())},pageSizeOptions:[10,20,50],paginationModel:v,onPaginationModelChange:f}),(0,i.jsx)(y,{open:S,onSuccess:()=>w(!b),onClose:()=>k(!1)}),(0,i.jsx)(z,{open:A,service:j,onSuccess:()=>w(!b),onClose:()=>M(!1)}),(0,i.jsx)(_,{open:N,service:j,onSuccess:()=>w(!b),onClose:()=>W(!1)})]})};A.getLayout=e=>(0,i.jsx)(Z.Z,{children:e}),A.authGuard=!0;var M=A}},function(e){e.O(0,[903,765,774,888,179],function(){return e(e.s=55859)}),_N_E=e.O()}]);