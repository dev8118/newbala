(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{26344:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/99-ew9c8/contacts",function(){return r(44618)}])},39070:function(e,t,r){"use strict";r.d(t,{Z:function(){return m}});var a=r(85893);r(67294);var s=r(98396),i=r(12937);let n=()=>[{title:"الأقسام",path:"/99-ew9c8/categories",icon:"material-symbols:category"},{title:"الأخبار",path:"/99-ew9c8/posts",icon:"bx:news"},{title:"خدمات",path:"/99-ew9c8/services",icon:"eos-icons:service"},{title:"ادارة القائمة الرئيسية",path:"/99-ew9c8/header-navigations",icon:"subway:menu"},{title:"ادارة  القائمة بالاسفل",path:"/99-ew9c8/footer-navigations",icon:"subway:menu"},{title:"مركز الاتصالات",path:"/99-ew9c8/contacts",icon:"bx:chat"},{title:"الاعدادات",path:"/99-ew9c8/setting",icon:"tabler:settings"}];var l=r(23664),o=r(29375),c=r(21958),d=r(28756);let h=e=>{let{children:t,contentHeightFixed:r}=e,{settings:h,saveSettings:m}=(0,d.r)(),x=(0,s.Z)(e=>e.breakpoints.down("lg"));return x&&"horizontal"===h.layout&&(h.layout="vertical"),(0,a.jsx)(i.Z,{hidden:x,settings:h,saveSettings:m,contentHeightFixed:r,verticalLayoutProps:{navMenu:{navItems:n()},appBar:{content:e=>(0,a.jsx)(o.Z,{hidden:x,settings:h,saveSettings:m,toggleNavVisibility:e.toggleNavVisibility})}},..."horizontal"===h.layout&&{horizontalLayoutProps:{navMenu:{navItems:(0,l.Z)()},appBar:{content:()=>(0,a.jsx)(c.Z,{settings:h,saveSettings:m})}}},children:t})};var m=h},44618:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return I}});var a=r(85893),s=r(67294),i=r(39070),n=r(87357),l=r(34386),o=r(93946),c=r(66242),d=r(78445),h=r(15861),m=r(61903),x=r(67720),u=r(62303),p=r(87918),g=r(86010),Z=r(2734),j=r(42563);let f=()=>{let e=(0,Z.Z)();return{primaryFilled:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main},primaryLight:{color:e.palette.primary.main,backgroundColor:(0,j.E)(e.palette.primary.main,.16)},secondaryFilled:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main},secondaryLight:{color:e.palette.secondary.main,backgroundColor:(0,j.E)(e.palette.secondary.main,.16)},successFilled:{color:e.palette.success.contrastText,backgroundColor:e.palette.success.main},successLight:{color:e.palette.success.main,backgroundColor:(0,j.E)(e.palette.success.main,.16)},errorFilled:{color:e.palette.error.contrastText,backgroundColor:e.palette.error.main},errorLight:{color:e.palette.error.main,backgroundColor:(0,j.E)(e.palette.error.main,.16)},warningFilled:{color:e.palette.warning.contrastText,backgroundColor:e.palette.warning.main},warningLight:{color:e.palette.warning.main,backgroundColor:(0,j.E)(e.palette.warning.main,.16)},infoFilled:{color:e.palette.info.contrastText,backgroundColor:e.palette.info.main},infoLight:{color:e.palette.info.main,backgroundColor:(0,j.E)(e.palette.info.main,.16)}}},b=e=>{let{sx:t,skin:r,color:s,rounded:i}=e,n=f(),l={primary:{...n.primaryLight},secondary:{...n.secondaryLight},success:{...n.successLight},error:{...n.errorLight},warning:{...n.warningLight},info:{...n.infoLight}},o={...e};return o.rounded=void 0,(0,a.jsx)(p.Z,{...o,variant:"filled",className:(0,g.Z)({"MuiChip-rounded":i,"MuiChip-light":"light"===r}),sx:"light"===r&&s?Object.assign(l[s],t):t})};var y=r(79878),v=r(51566),C=r(30381),w=r.n(C),k=r(50657),S=r(37645),z=r(6514),_=r(86886),P=r(94054),A=r(31425),L=r(83321),N=r(98456),E=r(9134);let W=e=>{let{open:t,contact:r,onClose:i}=e,[l,c]=(0,s.useState)(!1),[d,x]=(0,s.useState)(""),[u,p]=(0,s.useState)("");(0,s.useEffect)(()=>{t&&(x(r.email),p(""))},[t]);let g=async()=>{if(""===d.trim())E.Am.error("الرجاء إدخال عنوان البريد الإلكتروني.");else try{c(!0);let{data:e}=await v.Z.post("/admin/contacts/".concat(r._id,"/send-email"),{email:d,content:u});e.status?(E.Am.success(e.msg),i()):E.Am.error(e.msg)}catch(e){E.Am.error(e.message)}finally{c(!1)}};return(0,a.jsxs)(k.Z,{fullWidth:!0,maxWidth:"md",open:t,sx:{"& .MuiDialog-paper":{overflow:"visible"}},children:[(0,a.jsxs)(S.Z,{sx:{p:4},children:[(0,a.jsx)(h.Z,{variant:"h5",component:"span",children:"ارسل ايميل"}),(0,a.jsx)(o.Z,{sx:{position:"absolute",top:9,right:9},onClick:i,children:(0,a.jsx)(y.Z,{icon:"tabler:x",fontSize:"1.25rem"})})]}),(0,a.jsx)(z.Z,{dividers:!0,children:(0,a.jsxs)(_.ZP,{container:!0,spacing:5,children:[(0,a.jsxs)(_.ZP,{item:!0,md:6,xs:12,children:[(0,a.jsx)(P.Z,{fullWidth:!0,sx:{mb:5},children:(0,a.jsx)(m.Z,{label:"البريد الالكتروني",size:"small",value:d,onChange:e=>x(e.target.value)})}),(0,a.jsx)(P.Z,{fullWidth:!0,children:(0,a.jsx)(m.Z,{label:"المحتوى",size:"small",multiline:!0,minRows:15,value:u,onChange:e=>p(e.target.value)})})]}),(0,a.jsx)(_.ZP,{item:!0,md:6,xs:12,children:(0,a.jsxs)(n.Z,{sx:{border:e=>"1px solid ".concat(e.palette.divider),height:"100%",borderRadius:1,p:4},children:[(0,a.jsx)(n.Z,{sx:{textAlign:"center"},children:(0,a.jsx)(n.Z,{component:"img",src:"/images/logo-email.png",sx:{height:80}})}),(0,a.jsx)(h.Z,{variant:"h5",sx:{mb:4},children:"السلام عليكم"}),(0,a.jsxs)(h.Z,{sx:{mb:3},children:["عزيزي المرسل ",r.name]}),(0,a.jsx)(h.Z,{sx:{whiteSpace:"pre",mb:3},children:u}),(0,a.jsx)(h.Z,{children:"شكرا لتواصلكم"}),(0,a.jsx)(h.Z,{sx:{mb:3},children:"قسم الدعم"}),(0,a.jsx)(h.Z,{children:"مديرية بلدية الكوت"}),(0,a.jsx)(h.Z,{children:"محافظة واسط"}),(0,a.jsx)(h.Z,{children:"جمهورية العراق"})]})})]})}),(0,a.jsxs)(A.Z,{sx:{p:"1rem !important"},children:[(0,a.jsxs)(L.Z,{variant:"contained",color:"primary",disabled:l,onClick:g,children:[l&&(0,a.jsx)(N.Z,{color:"secondary",size:18,sx:{mr:2}})," إرسال الآن"]}),(0,a.jsx)(L.Z,{variant:"contained",color:"error",onClick:i,children:"إلغاء"})]})]})};var M=r(67555),T=r.n(M);r(79319);let F=e=>{let{open:t,contact:r,onClose:i}=e,[l,c]=(0,s.useState)(!1),[d,x]=(0,s.useState)(""),[u,p]=(0,s.useState)("");(0,s.useEffect)(()=>{t&&(x(r.phone),p(""))},[t]);let g=async()=>{if(""===d.trim())E.Am.error("الرجاء ادخال البريد الالكتروني للمستلم");else try{c(!0);let{data:e}=await v.Z.post("/admin/contacts/".concat(r._id,"/send-sms"),{phone:d,content:u});e.status?(E.Am.success(e.msg),i()):E.Am.error(e.msg)}catch(e){E.Am.error(e.message)}finally{c(!1)}};return(0,a.jsxs)(k.Z,{fullWidth:!0,maxWidth:"md",open:t,sx:{"& .MuiDialog-paper":{maxWidth:700,overflow:"visible"}},children:[(0,a.jsxs)(S.Z,{sx:{p:4},children:[(0,a.jsx)(h.Z,{variant:"h5",component:"span",children:"ارسل رسالة قصيرة SMS"}),(0,a.jsx)(o.Z,{sx:{position:"absolute",top:9,right:9},onClick:i,children:(0,a.jsx)(y.Z,{icon:"tabler:x",fontSize:"1.25rem"})})]}),(0,a.jsx)(z.Z,{dividers:!0,children:(0,a.jsxs)(_.ZP,{container:!0,spacing:5,children:[(0,a.jsxs)(_.ZP,{item:!0,md:7,xs:12,children:[(0,a.jsx)(P.Z,{fullWidth:!0,dir:"ltr",sx:{mb:5},children:(0,a.jsx)(T(),{specialLabel:"",country:"gb",value:d,onChange:e=>x(e),inputStyle:{width:"100%",height:46}})}),(0,a.jsx)(P.Z,{fullWidth:!0,children:(0,a.jsx)(m.Z,{label:"الرسالة",size:"small",multiline:!0,minRows:17,value:u,onChange:e=>p(e.target.value)})})]}),(0,a.jsx)(_.ZP,{item:!0,md:5,xs:12,children:(0,a.jsxs)(n.Z,{sx:{border:e=>"1px solid ".concat(e.palette.divider),height:"100%",borderRadius:3,background:e=>e.palette.success.dark,p:4,color:e=>e.palette.text.primary},children:[(0,a.jsx)(h.Z,{sx:{mb:5,color:"#fafafa"},children:"السلام عليكم"}),(0,a.jsxs)(h.Z,{sx:{mb:5,color:"#fafafa"},children:["عزيزي المرسل ",r.name]}),(0,a.jsx)(h.Z,{sx:{whiteSpace:"pre",color:"#fafafa",mb:5},children:u}),(0,a.jsx)(h.Z,{sx:{color:"#fafafa"},children:"شكرا لتواصلكم"}),(0,a.jsx)(h.Z,{sx:{color:"#fafafa",mb:5},children:"قسم الدعم"}),(0,a.jsx)(h.Z,{sx:{color:"#fafafa"},children:"مديرية بلدية الكوت"}),(0,a.jsx)(h.Z,{sx:{color:"#fafafa"},children:"محافظة واسط"}),(0,a.jsx)(h.Z,{sx:{color:"#fafafa"},children:"جمهورية العراق"})]})})]})}),(0,a.jsxs)(A.Z,{sx:{p:"1rem !important"},children:[(0,a.jsxs)(L.Z,{variant:"contained",color:"primary",disabled:l,onClick:g,children:[l&&(0,a.jsx)(N.Z,{color:"secondary",size:18,sx:{mr:2}})," ارسال"]}),(0,a.jsx)(L.Z,{variant:"contained",color:"error",onClick:i,children:"إلغاء"})]})]})};var R=r(58951);let D=e=>{let{open:t,contact:r,onSuccess:i,onClose:n}=e,[l,o]=(0,s.useState)(!1),c=async()=>{try{let e=r._id,{data:t}=await v.Z.delete("/admin/contacts/".concat(e));t.status?(E.Am.success(t.msg),i(),n()):E.Am.error(t.msg)}catch(e){E.Am.error(e.message)}finally{setTimeout(()=>o(!1),500)}};return(0,a.jsxs)(k.Z,{open:t,onClose:n,children:[(0,a.jsx)(S.Z,{children:(0,a.jsx)(h.Z,{variant:"h5",children:"هل أنت متأكد أنك تريد حذف جهة الاتصال هذه؟"})}),(0,a.jsx)(z.Z,{children:(0,a.jsx)(R.Z,{children:"بمجرد حذف جهة الاتصال هذه، لا يمكنك الرجوع إليها مرة أخرى."})}),(0,a.jsxs)(A.Z,{className:"dialog-actions-dense",children:[(0,a.jsxs)(L.Z,{variant:"contained",disabled:l,onClick:c,children:[l&&(0,a.jsx)(N.Z,{color:"secondary",size:18,sx:{mr:2}})," إرسال الآن"]}),(0,a.jsx)(L.Z,{variant:"contained",color:"error",onClick:n,children:"إلغاء"})]})]})},H=()=>{let[e,t]=(0,s.useState)(""),[r,i]=(0,s.useState)([]),[p,g]=(0,s.useState)({}),[Z,j]=(0,s.useState)(!1),[f,C]=(0,s.useState)(!1),[k,S]=(0,s.useState)(!1),[z,_]=(0,s.useState)(!1),[P,A]=(0,s.useState)({page:0,pageSize:10});(0,s.useEffect)(()=>{L()},[z,e]);let L=async()=>{let{data:t}=await v.Z.get("/admin/contacts",{params:{search:e}});i(t)},N=async(e,t)=>{e.stopPropagation();let{data:r}=await v.Z.put("/admin/contacts/".concat(t._id),{status:!0});r.status&&_(!z)},E=async(e,t)=>{e.stopPropagation();let{data:r}=await v.Z.put("/admin/contacts/".concat(t._id),{status:!1});r.status&&_(e=>!e)},M=async(e,t)=>{e.stopPropagation(),g(t),j(!0)},T=async(e,t)=>{e.stopPropagation(),g(t),C(!0)},R=async(e,t)=>{e.stopPropagation(),g(t),S(!0)};return(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(d.Z,{title:(0,a.jsx)(h.Z,{variant:"h4",children:"ادارة جهات الاتصال"}),action:(0,a.jsx)(n.Z,{children:(0,a.jsx)(m.Z,{size:"small",placeholder:"البحث",value:e,onChange:e=>t(e.target.value),InputProps:{startAdornment:(0,a.jsx)(n.Z,{sx:{mr:2,display:"flex"},children:(0,a.jsx)(y.Z,{fontSize:"1.25rem",icon:"tabler:search"})}),endAdornment:(0,a.jsx)(o.Z,{size:"small",title:"Clear","aria-label":"Clear",onClick:()=>t(""),children:(0,a.jsx)(y.Z,{fontSize:"1.25rem",icon:"tabler:x"})})}})})}),(0,a.jsx)(x.Z,{}),(0,a.jsx)(u._,{autoHeight:!0,getRowId:e=>e._id,rows:r,columns:[{flex:1,field:"name",headerName:"الاسم",renderCell:e=>{let{row:t}=e;return t.name}},{flex:1,minWidth:210,field:"email",headerName:"البريد الإلكتروني",renderCell:e=>{let{row:t}=e;return t.email}},{minWidth:110,field:"phone",headerName:"رقم الهاتف",renderCell:e=>{let{row:t}=e;return t.phone}},{flex:4,field:"message",headerName:"الرسالة",renderCell:e=>{let{row:t}=e;return t.message}},{flex:1,minWidth:130,field:"createdAt",headerName:"تاريخ الاستلام",renderCell:e=>{let{row:t}=e;return w()(t.createdAt).format("DD/MM/YYYY HH:mm")}},{flex:1,field:"status",headerName:"الحالة",minWidth:125,renderCell:e=>{let{row:t}=e;return(0,a.jsx)(b,{sx:{width:"100%"},label:!0===t.status?"تم الاطلاع":"لم يتم الاطلاع",size:"small",skin:"light",color:!0===t.status?"success":"error"})}},{flex:1,minWidth:155,field:"action",headerName:"الإجراء",renderCell:e=>{let{row:t}=e;return(0,a.jsxs)(n.Z,{children:[t.status?(0,a.jsx)(l.Z,{title:"تم الاطلاع",arrow:!0,children:(0,a.jsx)(o.Z,{size:"small",color:"error",onClick:e=>E(e,t),children:(0,a.jsx)(y.Z,{icon:"mdi:eye-off"})})}):(0,a.jsx)(l.Z,{title:"تم الاطلاع",arrow:!0,children:(0,a.jsx)(o.Z,{size:"small",color:"primary",onClick:e=>N(e,t),children:(0,a.jsx)(y.Z,{icon:"mdi:eye"})})}),(0,a.jsx)(l.Z,{title:"ارسال ايميل",arrow:!0,children:(0,a.jsx)(o.Z,{size:"small",color:"primary",onClick:e=>M(e,t),children:(0,a.jsx)(y.Z,{icon:"mdi:email"})})}),(0,a.jsx)(l.Z,{title:"ارسال رسالة",arrow:!0,children:(0,a.jsx)(o.Z,{size:"small",color:"primary",onClick:e=>T(e,t),children:(0,a.jsx)(y.Z,{icon:"mdi:sms",fontSize:20})})}),(0,a.jsx)(l.Z,{title:"حذف",arrow:!0,onClick:e=>R(e,t),children:(0,a.jsx)(o.Z,{size:"small",color:"error",children:(0,a.jsx)(y.Z,{icon:"mdi:trash"})})})]})}}],pageSizeOptions:[10,20,50],paginationModel:P,onPaginationModelChange:A}),(0,a.jsx)(W,{open:Z,contact:p,onClose:()=>j(!1)}),(0,a.jsx)(F,{open:f,contact:p,onClose:()=>C(!1)}),(0,a.jsx)(D,{open:k,contact:p,onSuccess:()=>_(e=>!e),onClose:()=>S(!1)})]})};H.getLayout=e=>(0,a.jsx)(i.Z,{children:e}),H.authGuard=!0;var I=H},79319:function(){}},function(e){e.O(0,[885,903,765,555,961,774,888,179],function(){return e(e.s=26344)}),_N_E=e.O()}]);