(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[807],{3731:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/99-ew9c8/categories",function(){return s(47148)}])},39070:function(e,t,s){"use strict";s.d(t,{Z:function(){return h}});var a=s(85893);s(67294);var n=s(98396),i=s(12937);let l=()=>[{title:"الأقسام",path:"/99-ew9c8/categories",icon:"material-symbols:category"},{title:"الأخبار",path:"/99-ew9c8/posts",icon:"bx:news"},{title:"خدمات",path:"/99-ew9c8/services",icon:"eos-icons:service"},{title:"ادارة القائمة الرئيسية",path:"/99-ew9c8/header-navigations",icon:"subway:menu"},{title:"ادارة  القائمة بالاسفل",path:"/99-ew9c8/footer-navigations",icon:"subway:menu"},{title:"مركز الاتصالات",path:"/99-ew9c8/contacts",icon:"bx:chat"},{title:"الاعدادات",path:"/99-ew9c8/setting",icon:"tabler:settings"}];var r=s(23664),o=s(29375),c=s(21958),d=s(28756);let x=e=>{let{children:t,contentHeightFixed:s}=e,{settings:x,saveSettings:h}=(0,d.r)(),u=(0,n.Z)(e=>e.breakpoints.down("lg"));return u&&"horizontal"===x.layout&&(x.layout="vertical"),(0,a.jsx)(i.Z,{hidden:u,settings:x,saveSettings:h,contentHeightFixed:s,verticalLayoutProps:{navMenu:{navItems:l()},appBar:{content:e=>(0,a.jsx)(o.Z,{hidden:u,settings:x,saveSettings:h,toggleNavVisibility:e.toggleNavVisibility})}},..."horizontal"===x.layout&&{horizontalLayoutProps:{navMenu:{navItems:(0,r.Z)()},appBar:{content:()=>(0,a.jsx)(c.Z,{settings:x,saveSettings:h})}}},children:t})};var h=x},47148:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return T}});var a=s(85893),n=s(67294),i=s(87918),l=s(87357),r=s(34386),o=s(83321),c=s(66242),d=s(78445),x=s(15861),h=s(61903),u=s(93946),m=s(67720),Z=s(62303),j=s(79878),g=s(39070),p=s(50657),f=s(37645),b=s(6514),v=s(94054),C=s(50480),S=s(69368),w=s(31425),y=s(98456),k=s(9134),z=s(51566);let A=e=>{let{open:t,onSuccess:s,onClose:i}=e,[r,c]=(0,n.useState)(!1),[d,m]=(0,n.useState)(""),[Z,g]=(0,n.useState)(""),[A,W]=(0,n.useState)(!1),[_,N]=(0,n.useState)(!1),[M,T]=(0,n.useState)(!1),[P,E]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t&&(m(""),g(""),W(!1),N(!1),T(!1),E(!1))},[t]);let I=async()=>{if(""===d.trim())k.Am.error("يرجى ادخال الإسم");else try{c(!0);let{data:e}=await z.Z.post("/admin/categories",{name:d,description:Z,isFeature:A,isTab:_,isPublish:M,isAdvertisement:P});e.status?(k.Am.success(e.msg),s(),i()):k.Am.error(e.msg)}catch(e){k.Am.error(e.message)}finally{setTimeout(()=>c(!1),500)}};return(0,a.jsxs)(p.Z,{fullWidth:!0,maxWidth:"xs",open:t,onClose:i,sx:{"& .MuiDialog-paper":{maxWidth:650,overflow:"visible"}},children:[(0,a.jsxs)(f.Z,{sx:{p:4},children:[(0,a.jsx)(x.Z,{variant:"h5",component:"span",children:"قسم جديد"}),(0,a.jsx)(u.Z,{sx:{position:"absolute",top:9,right:9},onClick:i,children:(0,a.jsx)(j.Z,{icon:"tabler:x",fontSize:"1.25rem"})})]}),(0,a.jsxs)(b.Z,{dividers:!0,children:[(0,a.jsx)(v.Z,{fullWidth:!0,sx:{mb:5},children:(0,a.jsx)(h.Z,{label:"الاسم",size:"small",value:d,onChange:e=>m(e.target.value)})}),(0,a.jsx)(v.Z,{fullWidth:!0,sx:{mb:2},children:(0,a.jsx)(h.Z,{type:"textarea",size:"small",multiline:!0,minRows:8,label:"الوصف",value:Z,onChange:e=>g(e.target.value)})}),(0,a.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,a.jsx)(C.Z,{label:"قسم الأخبار الرئيسة",control:(0,a.jsx)(S.Z,{checked:A,onChange:e=>W(e.target.checked)})}),(0,a.jsx)(C.Z,{label:"قسم النشاطات",control:(0,a.jsx)(S.Z,{checked:_,onChange:e=>N(e.target.checked)})}),(0,a.jsx)(C.Z,{label:"قسم الأصدارات",control:(0,a.jsx)(S.Z,{checked:M,onChange:e=>T(e.target.checked)})}),(0,a.jsx)(C.Z,{label:"قسم الإعلانات",control:(0,a.jsx)(S.Z,{checked:P,onChange:e=>E(e.target.checked)})})]})]}),(0,a.jsxs)(w.Z,{sx:{p:"1rem !important"},children:[(0,a.jsx)(o.Z,{variant:"contained",color:"primary",disabled:r,startIcon:r&&(0,a.jsx)(y.Z,{color:"inherit"}),onClick:I,children:"إنشاء"}),(0,a.jsx)(o.Z,{variant:"contained",color:"error",onClick:i,children:"إلغاء"})]})]})},W=e=>{let{open:t,category:s,onSuccess:i,onClose:r}=e,[c,d]=(0,n.useState)(!1),[m,Z]=(0,n.useState)(""),[g,A]=(0,n.useState)(""),[W,_]=(0,n.useState)(!1),[N,M]=(0,n.useState)(!1),[T,P]=(0,n.useState)(!1),[E,I]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t&&(Z(s.name),A(s.description),_(s.isFeature),M(s.isTab),P(s.isPublish),I(s.isAdvertisement))},[t]);let L=async()=>{if(""===m.trim())k.Am.error("يرجى ادخال الإسم");else try{d(!0);let e=s._id,{data:t}=await z.Z.put("/admin/categories/".concat(e),{name:m,description:g,isFeature:W,isTab:N,isPublish:T,isAdvertisement:E});t.status?(k.Am.success(t.msg),i(),r()):k.Am.error(t.msg)}catch(e){k.Am.error(e.message)}finally{setTimeout(()=>d(!1),500)}};return(0,a.jsxs)(p.Z,{fullWidth:!0,maxWidth:"xs",open:t,onClose:r,sx:{"& .MuiDialog-paper":{maxWidth:650,overflow:"visible"}},children:[(0,a.jsxs)(f.Z,{sx:{p:4},children:[(0,a.jsx)(x.Z,{variant:"h5",component:"span",children:"تعديل قسم"}),(0,a.jsx)(u.Z,{sx:{position:"absolute",top:9,right:9},onClick:r,children:(0,a.jsx)(j.Z,{icon:"tabler:x",fontSize:"1.25rem"})})]}),(0,a.jsxs)(b.Z,{dividers:!0,children:[(0,a.jsx)(v.Z,{fullWidth:!0,sx:{mb:5},children:(0,a.jsx)(h.Z,{label:"الاسم",size:"small",value:m,onChange:e=>Z(e.target.value)})}),(0,a.jsx)(v.Z,{fullWidth:!0,children:(0,a.jsx)(h.Z,{type:"textarea",size:"small",multiline:!0,minRows:8,label:"الوصف",value:g,onChange:e=>A(e.target.value)})}),(0,a.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,a.jsx)(C.Z,{label:"قسم الأخبار الرئيسة",control:(0,a.jsx)(S.Z,{checked:W,onChange:e=>_(e.target.checked)})}),(0,a.jsx)(C.Z,{label:"قسم النشاطات",control:(0,a.jsx)(S.Z,{checked:N,onChange:e=>M(e.target.checked)})}),(0,a.jsx)(C.Z,{label:"قسم الأصدارات",control:(0,a.jsx)(S.Z,{checked:T,onChange:e=>P(e.target.checked)})}),(0,a.jsx)(C.Z,{label:"قسم الإعلانات",control:(0,a.jsx)(S.Z,{checked:E,onChange:e=>I(e.target.checked)})})]})]}),(0,a.jsxs)(w.Z,{sx:{p:"1rem !important"},children:[(0,a.jsx)(o.Z,{variant:"contained",color:"primary",disabled:c,startIcon:c&&(0,a.jsx)(y.Z,{color:"inherit",size:16}),onClick:L,children:"تحديث"}),(0,a.jsx)(o.Z,{variant:"contained",color:"error",onClick:r,children:"إلغاء"})]})]})};var _=s(58951);let N=e=>{let{open:t,category:s,onSuccess:i,onClose:l}=e,[r,c]=(0,n.useState)(!1),d=async()=>{try{let e=s._id,{data:t}=await z.Z.delete("/admin/categories/".concat(e));t.status?(k.Am.success(t.msg),i(),l()):k.Am.error(t.msg)}catch(e){k.Am.error(e.message)}finally{setTimeout(()=>c(!1),500)}};return(0,a.jsxs)(p.Z,{open:t,onClose:l,children:[(0,a.jsx)(f.Z,{children:(0,a.jsx)(x.Z,{variant:"h5",children:"هل متأكد من حذف هذا القسم؟"})}),(0,a.jsx)(b.Z,{children:(0,a.jsx)(_.Z,{children:"بمجرد حذف القسم، لن تتمكن من استعادته مرة أخرى."})}),(0,a.jsxs)(w.Z,{className:"dialog-actions-dense",children:[(0,a.jsx)(o.Z,{variant:"contained",disabled:r,startIcon:r&&(0,a.jsx)(y.Z,{color:"inherit",size:16}),onClick:d,children:"حذف"}),(0,a.jsx)(o.Z,{variant:"contained",color:"error",onClick:l,children:"إلغاء"})]})]})},M=()=>{let[e,t]=(0,n.useState)(""),[s,g]=(0,n.useState)([]),[p,f]=(0,n.useState)({}),[b,v]=(0,n.useState)({page:0,pageSize:10}),[C,S]=(0,n.useState)(!1),[w,y]=(0,n.useState)(!1),[k,_]=(0,n.useState)(!1),[M,T]=(0,n.useState)(!1);(0,n.useEffect)(()=>{P()},[C,e]);let P=async()=>{let{data:t}=await z.Z.get("/admin/categories",{params:{search:e}});g(t)},E=(e,t)=>{e.stopPropagation(),f(t),_(!0)},I=(e,t)=>{e.stopPropagation(),f(t),T(!0)};return(0,a.jsxs)(c.Z,{children:[(0,a.jsx)(d.Z,{title:(0,a.jsx)(x.Z,{variant:"h4",children:"ادارة القسم"}),action:(0,a.jsxs)(l.Z,{sx:{display:"flex",gap:3},children:[(0,a.jsx)(h.Z,{size:"small",placeholder:"يبحث",value:e,onChange:e=>t(e.target.value),InputProps:{startAdornment:(0,a.jsx)(l.Z,{sx:{mr:2,display:"flex"},children:(0,a.jsx)(j.Z,{fontSize:"1.25rem",icon:"tabler:search"})}),endAdornment:(0,a.jsx)(u.Z,{size:"small",title:"البحث","aria-label":"واضح",onClick:()=>t(""),children:(0,a.jsx)(j.Z,{fontSize:"1.25rem",icon:"tabler:x"})})}}),(0,a.jsx)(o.Z,{variant:"contained",startIcon:(0,a.jsx)(j.Z,{icon:"mdi:plus"}),onClick:()=>y(!0),children:"انشاء قسم جديد"})]})}),(0,a.jsx)(m.Z,{}),(0,a.jsx)(Z._,{autoHeight:!0,rowHeight:60,getRowId:e=>e._id,columns:[{flex:1,field:"name",headerName:"الاسم",renderCell:e=>{let{row:t}=e;return t.title}},{flex:1,field:"description",headerName:"الوصف",renderCell:e=>{let{row:t}=e;return t.content}},{flex:1,maxWidth:120,field:"isFeature",headerName:"قسم الأخبار الرئيسة",renderCell:e=>{let{row:t}=e;return(0,a.jsx)(i.Z,{label:t.isFeature?"خاص":"عادي",color:t.isFeature?"success":"primary",size:"small",sx:{width:"100%"}})}},{flex:1,maxWidth:150,field:"isTab",headerName:"ظهور قسم النشاطات",renderCell:e=>{let{row:t}=e;return(0,a.jsx)(i.Z,{label:t.isTab?"مرئي":"غير مرئية",color:t.isTab?"primary":"error",size:"small",sx:{width:"100%"}})}},{flex:1,maxWidth:120,field:"isPublish",headerName:"قسم الإصدارات",renderCell:e=>{let{row:t}=e;return!0==t.isPublish&&(0,a.jsx)(i.Z,{label:"قسم الإصدارات",color:"primary",size:"small",sx:{width:"100%"}})}},{flex:1,maxWidth:120,field:"isAdvertisement",headerName:"قسم الاعلانات",renderCell:e=>{let{row:t}=e;return t.isAdvertisement&&(0,a.jsx)(i.Z,{label:"قسم الاعلانات",color:"primary",size:"small",sx:{width:"100%"}})}},{flex:1,maxWidth:105,field:"action",headerName:"الإجراء",renderCell:e=>{let{row:t}=e;return(0,a.jsxs)(l.Z,{sx:{display:"flex",gap:2},children:[(0,a.jsx)(r.Z,{title:"يحرر",children:(0,a.jsx)(o.Z,{variant:"contained",size:"small",sx:{minWidth:35,px:0},onClick:e=>E(e,t),children:(0,a.jsx)(j.Z,{icon:"tabler:edit"})})}),(0,a.jsx)(r.Z,{title:"يمسح",children:(0,a.jsx)(o.Z,{variant:"contained",color:"error",size:"small",sx:{minWidth:35,px:0},onClick:e=>I(e,t),children:(0,a.jsx)(j.Z,{icon:"tabler:trash"})})})]})}}],rows:s,localeText:{noRowsLabel:"لا توجد صفوف",footerTotalRows:"إجمالي الصفوف:",columnMenuFilter:"منقي",columnMenuHideColumn:"إخفاء العمود",columnMenuManageColumns:"إدارة الأعمدة",columnMenuSortAsc:"الترتيب حسب تصاعدي",columnMenuSortDesc:"الترتيب تنازلياً",footerRowSelected:e=>"".concat(e.toLocaleString()," الصفوف المحددة"),footerTotalVisibleRows:(e,t)=>"".concat(e.toLocaleString()," من ").concat(t.toLocaleString())},pageSizeOptions:[10,20,50],paginationModel:b,onPaginationModelChange:v}),(0,a.jsx)(A,{open:w,onSuccess:()=>S(!C),onClose:()=>y(!1)}),(0,a.jsx)(W,{open:k,category:p,onSuccess:()=>S(!C),onClose:()=>_(!1)}),(0,a.jsx)(N,{open:M,category:p,onSuccess:()=>S(!C),onClose:()=>T(!1)})]})};M.getLayout=e=>(0,a.jsx)(g.Z,{children:e}),M.authGuard=!0;var T=M}},function(e){e.O(0,[903,765,774,888,179],function(){return e(e.s=3731)}),_N_E=e.O()}]);